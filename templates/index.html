<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

        <!-- Font Awsome Icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/index.css') }}" />

        <!-- jQuery -->
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="{{ url_for('static', filename='js/auto-increase-textarea.js') }}"></script>

        <title>Movies Ranklist (@shreyansh818bytes)</title>
    </head>
    <body>
        <div class="app-container">
            <!-- Input Box -->
            <div class="container" id="input-container">
                <form action="/search" method="post">
                    <div class="input-group">
                        <input
                            class="form-control"
                            type="search"
                            name="single_text"
                            placeholder="Mono movie name goes here!"
                        >
                        <span class="input-group-append">
                            <button class="btn btn-primary" type="submit" name="Go">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                    </div>

                    <textarea
                        class="form-control"
                        id="text-area-input"
                        name="multiple_text"
                        placeholder="Multiple movie names can be entered here!&#10;Add year of release in movie name for better search results."
                    ></textarea>
                </form>
            </div>

            <!-- Output Box -->
            <div class="container" id="output-container">
                <div class="container head-container">
                    <h2>Movie Ranking</h2>
                </div>

                <div class="container border movie-list-container">
                    {% for movie in movies_list.list %}
                        <div class="container border movie-container">
                            <!-- Movie Backdrop -->
                            <div
                                class="logo-box-container"
                            >
                                <img
                                    src="{{ movie.logo_url }}"
                                    alt="Not found"
                                    class="logo-box"
                                />
                            </div>

                            <!-- Title and Year Headers -->
                            <div class="title-year-container text-warp">
                                <span>
                                    {{ movie.title }}
                                </span>
                                <h3>
                                    {% if movie.year %}
                                        {{ movie.year }}
                                    {% else %}
                                        --
                                    {% endif %}
                                </h3>
                            </div>

                            <!-- Individual Score Pills -->
                            <div class="d-inline-flex my-1">
                                <div class="icon-text-pill">
                                    <img src="{{ url_for('static', filename='assets/imdb-icon.svg') }}" />
                                    <p>
                                        {% if movie.imdb_data.rating %}
                                            {{ movie.imdb_data.rating }}
                                        {% else %}
                                            --
                                        {% endif %}
                                    </p>
                                </div>
                                <div class="icon-text-pill">
                                    <img src="{{ url_for('static', filename='assets/rt-icon.svg') }}" />
                                    <p>
                                        {% if movie.rt_data.rating %}
                                            {{ movie.rt_data.rating }}
                                        {% else %}
                                            --
                                        {% endif %}
                                    </p>
                                </div>
                                <div class="icon-text-pill">
                                    <img src="{{ url_for('static', filename='assets/tmdb-icon.svg') }}" />
                                    <p>
                                        {% if movie.tmdb_data.rating %}
                                            {{ movie.tmdb_data.rating }}
                                        {% else %}
                                            --
                                        {% endif %}
                                    </p>
                                </div>
                            </div>

                            <!-- Average Score Pill -->
                            <div class="rounded-pill avg-score">
                                {% if movie.average_score %}
                                    {{ '%.1f' % movie.average_score|float }}
                                {% else %}
                                    --
                                {% endif %}
                            </div>

                            <!-- Delete Button -->
                            <form action="/delete" method="post">
                                <button
                                    class="icon-button delete-button"
                                    type="submit"
                                    id="{{movie.id}}"
                                    onclick="onDeleteHandler(this.id, movie_delete_handler)"
                                    name="movie_id"
                                    value="{{movie.id}}"
                                >
                                    <img class="float-bottom" src="{{ url_for('static', filename='/assets/delete.svg') }}" />
                                </button>
                            </form>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    </body>
</html>
